<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../d2l-icons/tier1-icons.html">
<link rel="import" href="../d2l-icons/d2l-icon.html">
<link rel="import" href="d2l-menu-item-styles.html">
<link rel="import" href="d2l-menu-item-behavior.html">

<!--
`d2l-menu-item`
Polymer-based web component for standard menu items.
-->

<dom-module id="d2l-menu-item">

	<template>
		<style include="d2l-menu-item-styles">

			:host {
				display: flex;
				padding: 0.75rem 1rem;
			}

			:host > .d2l-menu-item-main {
				flex: auto;
			}

			:host > .d2l-menu-item-main > span {
				line-height: 1rem;
				overflow-x: hidden;
				overflow-y: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			:host > d2l-icon {
				flex: none;
				margin-top: 0.1rem;
			}

		</style>
		<div class="d2l-menu-item-main">
			<d2l-icon icon$=[[icon]] class="side-icon"></d2l-icon>
			<span>[[text]]</span>
		</div>
		<slot></slot>
	</template>

	<script>
		Polymer({
			is: 'd2l-menu-item',

			properties: {

				/**
				 * Icon to appear beside text
				 */
				icon: String

			},

			behaviors: [
				D2L.PolymerBehaviors.MenuItemBehavior
			],

			_initialize: function() {
				if (this.hasChildView && !this.$$('d2l-icon:not(.side-icon)')) {
					var icon = document.createElement('d2l-icon');
					Polymer.dom(icon).setAttribute('icon', 'd2l-tier1:chevron-right');
					Polymer.dom(this.root).insertBefore(
						icon, this.$$('slot')
					);
				}
			}

		});
	</script>

</dom-module>
