<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="d2l-menu-item-selectable-behavior.html">

<script>
'use strict';

(function() {

	window.D2L = window.D2L || {};
	window.D2L.PolymerBehaviors = window.D2L.PolymerBehaviors || {};

	/** @polymerBehavior D2L.PolymerBehaviors.MenuItemRadioBehavior */
	D2L.PolymerBehaviors.MenuItemRadioBehaviorImpl = {

		hostAttributes: {
			'role': 'menuitemradio',
		},

		attached: function() {
			Polymer.RenderStatus.afterNextRender(this, function() {
				this.listen(this, 'd2l-menu-item-change', '_onChange');
				this.listen(this, 'd2l-menu-item-select', '_onSelect');
			}.bind(this));
		},

		detached: function() {
			this.unlisten(this, 'd2l-menu-item-change', '_onChange');
			this.unlisten(this, 'd2l-menu-item-select', '_onSelect');
		},

		_onSelect: function(e) {
			this.set('selected', true);
			this.__onSelect(e);
		},

		_onChange: function(e) {
			var items = this.parentNode.querySelectorAll('[role="menuitemradio"]');
			for (var i = 0; i < items.length; i++) {
				items[i].set('selected', items[i].value === e.detail.value);
			}
		}

	};

	/** @polymerBehavior D2L.PolymerBehaviors.MenuItemRadioBehavior */
	D2L.PolymerBehaviors.MenuItemRadioBehavior = [
		D2L.PolymerBehaviors.MenuItemSelectableBehavior,
		D2L.PolymerBehaviors.MenuItemRadioBehaviorImpl,
	];
})();
</script>
